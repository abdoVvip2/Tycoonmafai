<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø¨Ø§Ø·Ø±Ø© Ø§Ù„Ø³ÙˆÙ‚ | ØªØ£Ø³ÙŠØ³ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b101b;
            --card: #161e2d;
            --blue: #3b82f6;
            --text: #f8fafc;
            --gold: #d4af37;
            --green: #22c55e;
        }

        body {
            margin: 0;
            font-family: 'Cairo', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px 0;
        }

        .auth-box {
            background: var(--card);
            padding: 35px;
            border-radius: 20px;
            width: 90%;
            max-width: 650px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.7);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        h2 { 
            text-align: center; 
            color: var(--blue); 
            margin-bottom: 30px; 
            font-size: 1.8rem;
        }

        .form-group { margin-bottom: 18px; }

        input, select {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: 1px solid #2d3748;
            background: #0f172a;
            color: white;
            box-sizing: border-box;
            font-family: 'Cairo';
            font-size: 1rem;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø®Ø§Øµ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… Ù„ØªØ¸Ù‡Ø± Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 123 */
        .en-num {
            direction: ltr !important;
            text-align: left;
            font-family: Arial, sans-serif !important;
        }

        .regions-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 25px 0;
        }

        .region-card {
            border: 2px solid #2d3748;
            padding: 18px;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.02);
            text-align: center;
        }

        .region-card:hover, .region-card.selected {
            border-color: var(--blue);
            background: rgba(59, 130, 246, 0.15);
            transform: translateY(-3px);
        }

        .region-card h4 { margin: 8px 0 10px 0; font-size: 1rem; }
        .region-card p { font-size: 0.8rem; margin: 0; color: #94a3b8; line-height: 1.4; }

        .btn-action {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #2563eb, #3b82f6);
            border: none;
            color: white;
            font-weight: 900;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.3rem;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-action:hover { transform: translateY(-2px); }

        .toggle-link {
            text-align: center;
            margin-top: 25px;
            color: var(--blue);
            font-size: 1rem;
            cursor: pointer;
            text-decoration: underline;
        }

        .hidden { display: none; }

        label { 
            font-size: 1rem; 
            color: #94a3b8; 
            margin-bottom: 10px; 
            display: block; 
            font-weight: 600;
        }

        .gift-info {
            background: rgba(34, 197, 94, 0.1);
            border: 1px dashed var(--green);
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: var(--green);
        }
    </style>
</head>
<body>

    <div class="auth-box">
        <div id="signup-form">
            <h2>ØªØ£Ø³ÙŠØ³ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            
            <div class="gift-info">
                ğŸ Ù‡Ø¯ÙŠØ© Ø§Ù„ØªØ£Ø³ÙŠØ³: 1,000,000 Ø¹Ù…Ù„Ø© Ùˆ 50,000 Ù…ÙˆØ§Ø·Ù†!
            </div>

            <div class="form-group">
                <input type="text" id="reg-president" placeholder="Ø§Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ (Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©)" required>
            </div>
            <div class="form-group">
                <input type="text" id="reg-city" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©" required>
            </div>
            <div class="form-group">
                <input type="email" id="reg-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
            </div>
            <div class="form-group">
                <input type="password" id="reg-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± (Ù‚ÙˆÙŠØ©)" required>
            </div>

            <label>Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</label>
            <div class="regions-grid">
                <div class="region-card" onclick="selectRegion(this, 'Ø£Ø±Ø®Ø¨ÙŠÙ„ Ù†ÙŠØ±Ø¯')">
                    <h4>ğŸï¸ Ø£Ø±Ø®Ø¨ÙŠÙ„ Ù†ÙŠØ±Ø¯</h4>
                    <p>ØªØ¬Ø§Ø±Ø© Ø¨Ø­Ø±ÙŠØ© Ù‚ÙˆÙŠØ©<br>Ù†Ù‚Øµ Ù…ÙˆØ§Ø±Ø¯ ØµØ®Ø±ÙŠØ©</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'Ù‡Ø¶Ø¨Ø© Ø§Ù„Ù…Ø·Ø±')">
                    <h4>â›°ï¸ Ù‡Ø¶Ø¨Ø© Ø§Ù„Ù…Ø·Ø±</h4>
                    <p>Ø¥Ù†ØªØ§Ø¬ ØºØ°Ø§Ø¡ Ù‡Ø§Ø¦Ù„<br>Ø¨Ø¹ÙŠØ¯Ø© Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ù†Ø¦</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'ÙˆØ§Ø­Ø© Ø§Ù„ØµÙ…Øª')">
                    <h4>ğŸœï¸ ÙˆØ§Ø­Ø© Ø§Ù„ØµÙ…Øª</h4>
                    <p>Ù†ÙØ· ÙˆÙÙŠØ±<br>ØªÙƒÙ„ÙØ© Ø¨Ù†Ø§Ø¡ Ø¹Ø§Ù„ÙŠØ©</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ¯')">
                    <h4>ğŸ­ ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ¯</h4>
                    <p>ØµÙ†Ø§Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©<br>ØªÙ„ÙˆØ« ÙŠØ¨Ø·Ø¦ Ø§Ù„Ù†Ù…Ùˆ</p>
                </div>
            </div>

            <label>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠ:</label>
            <select id="reg-system">
                <option value="capitalist">Ø±Ø£Ø³Ù…Ø§Ù„ÙŠØ© Ø­Ø±Ø© ğŸ’°</option>
                <option value="dictator">Ø­ÙƒÙ… Ø¹Ø³ÙƒØ±ÙŠ Ù…Ø·Ù„Ù‚ ğŸ–ï¸</option>
                <option value="communist">Ø´ÙŠÙˆØ¹ÙŠØ© ØªØ¹Ø§ÙˆÙ†ÙŠØ© â˜­</option>
                <option value="technocracy">ØªÙŠÙƒÙ†ÙˆÙ‚Ø±Ø§Ø·ÙŠØ© ğŸ§ª</option>
                <option value="monarchy">Ù…Ù„ÙƒÙŠØ© Ø¯Ø³ØªÙˆØ±ÙŠØ© ğŸ‘‘</option>
                <option value="anarchy">Ù„Ø§ Ø³Ù„Ø·ÙˆÙŠØ© ğŸ´</option>
                <option value="theocracy">Ø­ÙƒÙ… Ø¯ÙŠÙ†ÙŠ â›ª</option>
                <option value="social_demo">Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ğŸ‡ªğŸ‡º</option>
            </select>

            <button class="btn-action" onclick="handleSignUp()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</button>
            <div class="toggle-link" onclick="toggleForms()">Ù„Ø¯ÙŠÙƒ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
        </div>

        <div id="login-form" class="hidden">
            <h2>Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­ÙƒÙ…</h2>
            <div class="form-group">
                <input type="email" id="log-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
            </div>
            <div class="form-group">
                <input type="password" id="log-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" required>
            </div>
            <button class="btn-action" onclick="handleLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            <div class="toggle-link" onclick="toggleForms()">Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDIxOZ_zEKosBgJD2Thn038BFpM25rVGcc",
            authDomain: "tycoon-c3b89.firebaseapp.com",
            projectId: "tycoon-c3b89",
            storageBucket: "tycoon-c3b89.firebasestorage.app",
            messagingSenderId: "534437445544",
            appId: "1:534437445544:web:5f7ea5396367e6b5cca79d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let selectedRegion = "";

        window.selectRegion = (el, name) => {
            document.querySelectorAll('.region-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedRegion = name;
        };

        window.toggleForms = () => {
            document.getElementById('signup-form').classList.toggle('hidden');
            document.getElementById('login-form').classList.toggle('hidden');
        };

        // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© (ØªÙØ³ØªØ¯Ø¹Ù‰ ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
        async function createNewEmpire(uid, president, city, system, email) {
            const playerRef = doc(db, "players", uid);
            await setDoc(playerRef, {
                presidentName: president,
                countryName: city,
                govSystem: system,
                region: selectedRegion,
                email: email,
                
                // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ø£Ø±Ù‚Ø§Ù… Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© 123)
                balance: 1000000,     // Ù…Ù„ÙŠÙˆÙ† Ø¹Ù…Ù„Ø©
                population: 50000,    // 50 Ø£Ù„Ù Ù…ÙˆØ§Ø·Ù†
                
                // Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ ØªØ¨Ø¯Ø£ Ù…Ù† ØµÙØ±
                bakeries: 0,
                farms: 0,
                fuel: 0,
                bread: 0,
                level: 1,
                
                // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù†Ø¸Ø§Ù…
                lastCheck: new Date(),
                lastProdDate: new Date(),
                lastSimDate: new Date(),
                lastUpdate: new Date(),
                lastSim: "(ÙŠ) - {Ù…}:0",
                messages: []
            });
        }

        window.handleSignUp = async () => {
            const email = document.getElementById('reg-email').value.trim();
            const pass = document.getElementById('reg-pass').value;
            const president = document.getElementById('reg-president').value.trim();
            const city = document.getElementById('reg-city').value.trim();
            const system = document.getElementById('reg-system').value;

            if (!email || !pass || !president || !city || !selectedRegion) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø·Ù‚Ø©!");
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
                // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø© ÙÙŠ Firestore Ù…Ø¹ Ù…Ù„ÙŠÙˆÙ† Ø¹Ù…Ù„Ø© Ùˆ50 Ø£Ù„Ù Ù…ÙˆØ§Ø·Ù†
                await createNewEmpire(userCredential.user.uid, president, city, system, email);
                
                alert(`Ù…Ø¨Ø±ÙˆÙƒ! ØªÙ… ØªØ£Ø³ÙŠØ³ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©. Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ: 1,000,000$`);
                window.location.href = 'consol.html';
            } catch (error) {
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + error.message);
            }
        };

        window.handleLogin = async () => {
            const email = document.getElementById('log-email').value.trim();
            const pass = document.getElementById('log-pass').value;

            if (!email || !pass) {
                alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±");
                return;
            }

            try {
                await signInWithEmailAndPassword(auth, email, pass);
                window.location.href = 'consol.html';
            } catch (error) {
                alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        };
    </script>
</body>
</html>
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.02);
            text-align: center;
        }

        .region-card:hover, .region-card.selected {
            border-color: var(--blue);
            background: rgba(59, 130, 246, 0.15);
            transform: translateY(-3px);
        }

        .region-card h4 { margin: 8px 0 10px 0; font-size: 1rem; }
        .region-card p { font-size: 0.8rem; margin: 0; color: #94a3b8; line-height: 1.4; }

        .btn-action {
            width: 100%;
            padding: 18px;
            background: linear-gradient(45deg, #2563eb, #3b82f6);
            border: none;
            color: white;
            font-weight: 900;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.3rem;
            margin-top: 30px;
            box-shadow: 0 8px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-action:hover { transform: translateY(-2px); }

        .toggle-link {
            text-align: center;
            margin-top: 25px;
            color: var(--blue);
            font-size: 1rem;
            cursor: pointer;
            text-decoration: underline;
        }

        .hidden { display: none; }

        label { 
            font-size: 1rem; 
            color: #94a3b8; 
            margin-bottom: 10px; 
            display: block; 
            font-weight: 600;
        }
    </style>
</head>
<body>

    <div class="auth-box">
        <div id="signup-form">
            <h2>ØªØ£Ø³ÙŠØ³ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</h2>
            
            <div class="form-group">
                <input type="text" id="reg-president" placeholder="Ø§Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ (Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©)" required>
            </div>
            <div class="form-group">
                <input type="text" id="reg-city" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©" required>
            </div>
            <div class="form-group">
                <input type="email" id="reg-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
            </div>
            <div class="form-group">
                <input type="password" id="reg-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± (Ù‚ÙˆÙŠØ©)" required>
            </div>

            <label>Ø§Ø®ØªØ± Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:</label>
            <div class="regions-grid">
                <div class="region-card" onclick="selectRegion(this, 'Ø£Ø±Ø®Ø¨ÙŠÙ„ Ù†ÙŠØ±Ø¯')">
                    <h4>ğŸï¸ Ø£Ø±Ø®Ø¨ÙŠÙ„ Ù†ÙŠØ±Ø¯</h4>
                    <p>ØªØ¬Ø§Ø±Ø© Ø¨Ø­Ø±ÙŠØ© Ù‚ÙˆÙŠØ©<br>Ù†Ù‚Øµ Ù…ÙˆØ§Ø±Ø¯ ØµØ®Ø±ÙŠØ©</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'Ù‡Ø¶Ø¨Ø© Ø§Ù„Ù…Ø·Ø±')">
                    <h4>â›°ï¸ Ù‡Ø¶Ø¨Ø© Ø§Ù„Ù…Ø·Ø±</h4>
                    <p>Ø¥Ù†ØªØ§Ø¬ ØºØ°Ø§Ø¡ Ù‡Ø§Ø¦Ù„<br>Ø¨Ø¹ÙŠØ¯Ø© Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ù†Ø¦</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'ÙˆØ§Ø­Ø© Ø§Ù„ØµÙ…Øª')">
                    <h4>ğŸœï¸ ÙˆØ§Ø­Ø© Ø§Ù„ØµÙ…Øª</h4>
                    <p>Ù†ÙØ· ÙˆÙÙŠØ±<br>ØªÙƒÙ„ÙØ© Ø¨Ù†Ø§Ø¡ Ø¹Ø§Ù„ÙŠØ©</p>
                </div>
                <div class="region-card" onclick="selectRegion(this, 'ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ¯')">
                    <h4>ğŸ­ ÙˆØ§Ø¯ÙŠ Ø§Ù„Ø­Ø¯ÙŠØ¯</h4>
                    <p>ØµÙ†Ø§Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©<br>ØªÙ„ÙˆØ« ÙŠØ¨Ø·Ø¦ Ø§Ù„Ù†Ù…Ùˆ</p>
                </div>
            </div>

            <label>Ù†Ø¸Ø§Ù… Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø£ÙˆÙ„ÙŠ:</label>
            <select id="reg-system">
                <option value="capitalist">Ø±Ø£Ø³Ù…Ø§Ù„ÙŠØ© Ø­Ø±Ø© ğŸ’°</option>
                <option value="dictator">Ø­ÙƒÙ… Ø¹Ø³ÙƒØ±ÙŠ Ù…Ø·Ù„Ù‚ ğŸ–ï¸</option>
                <option value="communist">Ø´ÙŠÙˆØ¹ÙŠØ© ØªØ¹Ø§ÙˆÙ†ÙŠØ© â˜­</option>
                <option value="technocracy">ØªÙŠÙƒÙ†ÙˆÙ‚Ø±Ø§Ø·ÙŠØ© ğŸ§ª</option>
                <option value="monarchy">Ù…Ù„ÙƒÙŠØ© Ø¯Ø³ØªÙˆØ±ÙŠØ© ğŸ‘‘</option>
                <option value="anarchy">Ù„Ø§ Ø³Ù„Ø·ÙˆÙŠØ© ğŸ´</option>
                <option value="theocracy">Ø­ÙƒÙ… Ø¯ÙŠÙ†ÙŠ â›ª</option>
                <option value="social_demo">Ø¯ÙŠÙ…Ù‚Ø±Ø§Ø·ÙŠØ© Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© ğŸ‡ªğŸ‡º</option>
            </select>

            <button class="btn-action" onclick="handleSignUp()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</button>
            
            <div class="toggle-link" onclick="toggleForms()">Ù„Ø¯ÙŠÙƒ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</div>
        </div>

        <div id="login-form" class="hidden">
            <h2>Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­ÙƒÙ…</h2>
            
            <div class="form-group">
                <input type="email" id="log-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
            </div>
            <div class="form-group">
                <input type="password" id="log-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" required>
            </div>

            <button class="btn-action" onclick="handleLogin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            
            <div class="toggle-link" onclick="toggleForms()">Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getAuth, 
            createUserWithEmailAndPassword,
            signInWithEmailAndPassword 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { 
            getFirestore, 
            doc, 
            setDoc, 
            getDoc 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDIxOZ_zEKosBgJD2Thn038BFpM25rVGcc",
            authDomain: "tycoon-c3b89.firebaseapp.com",
            projectId: "tycoon-c3b89",
            storageBucket: "tycoon-c3b89.firebasestorage.app",
            messagingSenderId: "534437445544",
            appId: "1:534437445544:web:5f7ea5396367e6b5cca79d"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let selectedRegion = "";

        window.selectRegion = (el, name) => {
            document.querySelectorAll('.region-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedRegion = name;
        };

        window.toggleForms = () => {
            document.getElementById('signup-form').classList.toggle('hidden');
            document.getElementById('login-form').classList.toggle('hidden');
        };

        // Ø¯Ø§Ù„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª ØµÙØ±ÙŠØ© (ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯)
        async function createNewEmpire(uid, president, city, system) {
            const playerRef = doc(db, "players", uid);
            await setDoc(playerRef, {
                presidentName: president,
                countryName: city,
                govSystem: system,
                region: selectedRegion,
                balance: 0,        // ØµÙØ± ÙÙ„Ø³
                population: 0,     // ØµÙØ± Ø³ÙƒØ§Ù†
                bakeries: 0,       // ØµÙØ± Ù…Ø®Ø§Ø¨Ø²
                farms: 0,          // ØµÙØ± Ù…Ø²Ø§Ø±Ø¹
                fuel: 0,           // ØµÙØ± ÙˆÙ‚ÙˆØ¯
                bread: 0,          // ØµÙØ± Ø®Ø¨Ø²
                level: 1,
                lastCheck: new Date(),
                lastProdDate: new Date(),
                lastSimDate: new Date(),
                lastUpdate: new Date(),
                lastSim: "(ÙŠ) - {Ù…}:0",
                messages: [],
                email: auth.currentUser.email
            });
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
        window.handleSignUp = async () => {
            const email = document.getElementById('reg-email').value.trim();
            const pass = document.getElementById('reg-pass').value;
            const president = document.getElementById('reg-president').value.trim();
            const city = document.getElementById('reg-city').value.trim();
            const system = document.getElementById('reg-system').value;

            if (!email || !pass || !president || !city || !selectedRegion) {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ§Ø®ØªÙŠØ§Ø± Ù…Ù†Ø·Ù‚Ø©!");
                return;
            }

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
                // Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙ‚Ø· Ù†Ù‚ÙˆÙ… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙØ±ÙŠØ©
                await createNewEmpire(userCredential.user.uid, president, city, system);
                
                alert(`ØªÙ… Ø§Ù„ØªØ£Ø³ÙŠØ³! Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙŠØ§ Ø³ÙŠØ§Ø¯Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ ${president}`);
                window.location.href = 'consol.html';
            } catch (error) {
                alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + error.message);
            }
        };

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ù„Ø§ ÙŠØ¹Ø¯Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ø¨Ø¯Ø§Ù‹)
        window.handleLogin = async () => {
            const email = document.getElementById('log-email').value.trim();
            const pass = document.getElementById('log-pass').value;

            if (!email || !pass) {
                alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±");
                return;
            }

            try {
                await signInWithEmailAndPassword(auth, email, pass);
                // Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙÙˆØ±Ø§Ù‹ Ø¯ÙˆÙ† Ù„Ù…Ø³ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                window.location.href = 'consol.html';
            } catch (error) {
                alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        };
    </script>
</body>
</html>
